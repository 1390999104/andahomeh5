(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-topic-detil-topic-detil"],{"03e1":function(t,e,i){"use strict";var n,o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"position-relative"},[i("v-uni-image",{staticClass:"wd-100 filter",staticStyle:{height:"300rpx"},attrs:{src:t.topicDetil.cover,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"position-relative bg-white px-20",staticStyle:{"z-index":"100"}},[i("v-uni-view",{staticClass:"flex justify-start"},[i("v-uni-image",{staticClass:"rounded mr-20",staticStyle:{width:"150rpx",height:"150rpx","margin-top":"-75rpx"},attrs:{src:t.topicDetil.cover,mode:""}}),i("v-uni-text",{staticClass:"font"},[t._v("#"+t._s(t.topicDetil.title)+"#")])],1),i("v-uni-view",{staticClass:"flex justify-start font-sm text-light-muted mt-10"},[i("v-uni-text",{staticClass:"mr-20"},[t._v("动态:"+t._s(t.topicDetil.news_count))]),i("v-uni-text",[t._v("今日:"+t._s(t.topicDetil.today_count))])],1),i("v-uni-view",{staticClass:"font text-light-muted mt-20"},[t._v("话题描述")])],1)],1)},r=[];i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}))},"0542":function(t,e,i){"use strict";var n,o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"content animated fast fadeIn"},[i("v-uni-view",{staticClass:"article_info"},[i("v-uni-view",{staticClass:"ueser pd-2"},[i("v-uni-view",{staticClass:"ueser_left flex"},[i("v-uni-view",{staticClass:"user_image"},[i("v-uni-image",{staticClass:"image",attrs:{src:t.item.userpic,mode:"","lazy-load":!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openSpace(t.item.user_id)}}}),i("v-uni-view",{staticClass:"user_mess"},[i("v-uni-text",{staticStyle:{"font-size":"28rpx","line-height":"1.5"}},[t._v(t._s(t.item.username?t.item.username:""))]),i("v-uni-text",{staticStyle:{color:"#9d9589","font-size":"20rpx","line-height":"1.5"}},[t._v(t._s(t._f("formatTime")(t.item.newstime)))])],1)],1)],1),i("v-uni-view",{staticClass:"ueser_right"},[0!==t.user.role&&t.loginStatus?i("v-uni-text",{staticClass:"button animated faster my-10",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deletePost(t.item.id)}}},[t._v("删除")]):t._e(),t.item.isFollow||t.user.id===t.item.user_id?t._e():i("v-uni-view",{staticClass:"button animated faster",attrs:{"hover-class":"jello"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.follow.apply(void 0,arguments)}}},[t._v(t._s(t.item.isFollow?"已关注":"关注"))])],1)],1),i("v-uni-view",{staticClass:"article_title",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDetail.apply(void 0,arguments)}}},[i("v-uni-text",{staticStyle:{"font-size":"30rpx"}},[t._v(t._s(t.item.title))])],1),t._t("default",[t.item.titlepic?i("v-uni-view",{staticClass:"article_image",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDetail.apply(void 0,arguments)}}},[i("v-uni-image",{staticStyle:{width:"100%",height:"350rpx"},attrs:{src:t.item.titlepic,mode:"aspectFit"}})],1):t._e()]),i("v-uni-view",{staticClass:"article_details"},[i("v-uni-view",{staticClass:"flex animated faster",class:"support"==t.item.support.type?"active":"",staticStyle:{flex:"1"},attrs:{"hover-class":"jello font-color"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doSupport("support")}}},[i("v-uni-text",{staticClass:" iconfont"},[t._v("")]),i("v-uni-text",[t._v(t._s(t.item.support.support_count>0?t.item.support.support_count:"点赞"))])],1),i("v-uni-view",{staticClass:"flex  animated faster",class:"unsupport"==t.item.support.type?"active":"",staticStyle:{flex:"1"},attrs:{"hover-class":"jello font-color"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doSupport("unsupport")}}},[i("v-uni-text",{staticClass:" iconfont"},[t._v("")]),i("v-uni-text",[t._v(t._s(t.item.support.unsupport_count>0?t.item.support.unsupport_count:"点灭"))])],1),i("v-uni-view",{staticClass:"flex  animated faster",staticStyle:{flex:"1"},attrs:{"hover-class":"jello font-color"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doComment.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:" iconfont"},[t._v("")]),i("v-uni-text",[t._v(t._s(t.item.comment_count>0?t.item.comment_count:"评论"))])],1),i("v-uni-view",{staticClass:"flex animated faster",staticStyle:{flex:"1"},attrs:{"hover-class":"jello font-color"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doShare.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:" iconfont"},[t._v("")]),i("v-uni-text",[t._v(t._s(t.item.share_num>0?t.item.share_num:"分享"))])],1)],1)],2)],1)],1)},r=[];i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}))},"0bcd":function(t,e,i){var n=i("4619");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("20260275",n,!0,{sourceMap:!1,shadowMode:!1})},1508:function(t,e,i){"use strict";var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("75fc"));i("ac6a");var r=n(i("5449")),a=n(i("77f7")),s=n(i("2ec0")),c=[],u={components:{topicInfo:r.default,commonList:a.default,loadMore:s.default},onLoad:function(t){var e=this;t.detail&&(this.topicDetil=JSON.parse(t.detail),uni.setNavigationBarTitle({title:this.topicDetil.title})),this.getData(),this.newArticleList=c,uni.$on("updateFollowOrSupport",(function(t){switch(t.type){case"follow":e.follow(t.data.user_id);break}}))},onUnload:function(){uni.$off("updateFollowOrSupport",(function(t){}))},onReachBottom:function(){this.loadmore()},data:function(){return{topicDetil:{},tabIndex:0,choose:!1,page1:1,page2:1,tabList:[{type:"默认"},{type:"最新"}],hotList:[{title:"【新人必读】新人必读！！新人必读！！新人必读！！新人必读！"},{title:"【新人必读】新人必读！！新人必读！！新人必读！！新人必读！"}],firstLoad1:!1,firstLoad2:!1,list1:[],loadText1:"上拉加载更多",loadText2:"上拉加载更多",list2:[]}},computed:{listData:function(){return 0===this.tabIndex?this.list1:this.list2},loadText:function(){return 0===this.tabIndex?this.loadText1:this.loadText2}},methods:{doSupport:function(t){var e=this.tabIndex+1;this["list"+e].forEach((function(e){if(e.id==t.id){if(console.log(e),""===e.support.type)return e.support.type=t.type,void e.support[t.type+"_count"]++;"support"===e.support.type&&"unsupport"===t.type?(e.support.support_count--,e.support.unsupport_count++):"unsupport"===e.support.type&&"support"===t.type&&(e.support.support_count++,e.support.unsupport_count--),e.support.type=t.type}})),"support"==t.type?uni.showToast({title:"👍",icon:"none"}):uni.showToast({title:"👎",icon:"none"})},follow:function(t){this.list1.forEach((function(e){e.user_id==t&&(e.isFollow=!0)})),this.list2.forEach((function(e){e.user_id==t&&(e.isFollow=!0)})),uni.showToast({title:"关注成功！"})},changeTab:function(t){this.tabIndex=t,!this["firstLoad"]+(t+1)&&this.getData()},getData:function(){var t=this,e=this.tabIndex+1,i=this["page"+e],n=1===i;this.request.getTopicPostById(this.topicDetil.id,i).then((function(i){var r=i.data.list.map((function(e){return t.until.formatCommonList(e)}));t["list"+e]=n?(0,o.default)(r):[].concat((0,o.default)(t["list"+e]),(0,o.default)(r)),t["loadText"+e]=r.length<10?"没有更多了":"上拉加载更多",n&&(t["firstLoad"+e]=!0),console.log(t.list1)})).catch((function(i){n||t["page"+e]--}))},loadmore:function(){var t=this.tabIndex+1;"上拉加载更多"===this.loadText&&(this["loadText"+(this.tabIndex+t)]="加载中...",this["page"+t]++,this.getData())}}};e.default=u},"17a7":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:["topicDetil"],data:function(){return{}}};e.default=n},"1af6":function(t,e,i){var n=i("63b6");n(n.S,"Array",{isArray:i("9003")})},"20fd":function(t,e,i){"use strict";var n=i("d9f6"),o=i("aebd");t.exports=function(t,e,i){e in t?n.f(t,e,o(0,i)):t[e]=i}},"2ec0":function(t,e,i){"use strict";i.r(e);var n=i("3c16"),o=i("f941");for(var r in o)"default"!==r&&function(t){i.d(e,t,(function(){return o[t]}))}(r);var a,s=i("f0c5"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"6772f926",null,!1,n["a"],a);e["default"]=c.exports},"2f26":function(t,e,i){"use strict";i.r(e);var n=i("17a7"),o=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=o.a},3055:function(t,e,i){"use strict";var n=i("5a58"),o=i.n(n);o.a},3702:function(t,e,i){var n=i("481b"),o=i("5168")("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||r[o]===t)}},"3c16":function(t,e,i){"use strict";var n,o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"flex"},[i("v-uni-text",{staticStyle:{"font-size":"30rpx",color:"#9d9d9c"}},[t._v(t._s(t.loadmore))])],1)],1)},r=[];i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}))},"40c3":function(t,e,i){var n=i("6b4c"),o=i("5168")("toStringTag"),r="Arguments"==n(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(i){}};t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=a(e=Object(t),o))?i:r?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},4619:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".ueser[data-v-7f5b8bf1]{\n\t\t/* padding: 20rpx; */display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.ueser_right[data-v-7f5b8bf1]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.user_mess[data-v-7f5b8bf1]{\n\t\t/* padding: 10rpx; */display:-webkit-box;display:-webkit-flex;display:flex;padding-left:%?20?%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start}.user_image[data-v-7f5b8bf1]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.image[data-v-7f5b8bf1]{width:%?65?%;height:%?65?%;border-radius:100%}.button[data-v-7f5b8bf1]{width:%?90?%;height:%?50?%;display:-webkit-box;display:-webkit-flex;display:flex;border-radius:10%;background-color:#16c2c2;color:#fff;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.article_title[data-v-7f5b8bf1]{padding:0 %?20?%}.article_details[data-v-7f5b8bf1]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.iconfont[data-v-7f5b8bf1]{margin-right:%?20?%;font-size:%?30?%}.active[data-v-7f5b8bf1]{color:#16c2c2}",""]),t.exports=e},"4a66":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:["loadmore"],data:function(){return{}}};e.default=n},"4ee1":function(t,e,i){var n=i("5168")("iterator"),o=!1;try{var r=[7][n]();r["return"]=function(){o=!0},Array.from(r,(function(){throw 2}))}catch(a){}t.exports=function(t,e){if(!e&&!o)return!1;var i=!1;try{var r=[7],s=r[n]();s.next=function(){return{done:i=!0}},r[n]=function(){return s},t(r)}catch(a){}return i}},5449:function(t,e,i){"use strict";i.r(e);var n=i("03e1"),o=i("2f26");for(var r in o)"default"!==r&&function(t){i.d(e,t,(function(){return o[t]}))}(r);var a,s=i("f0c5"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"0c272b0e",null,!1,n["a"],a);e["default"]=c.exports},"549b":function(t,e,i){"use strict";var n=i("d864"),o=i("63b6"),r=i("241e"),a=i("b0dc"),s=i("3702"),c=i("b447"),u=i("20fd"),l=i("7cd6");o(o.S+o.F*!i("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,i,o,f,d=r(t),p="function"==typeof this?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,m=void 0!==b,h=0,x=l(d);if(m&&(b=n(b,v>2?arguments[2]:void 0,2)),void 0==x||p==Array&&s(x))for(e=c(d.length),i=new p(e);e>h;h++)u(i,h,m?b(d[h],h):d[h]);else for(f=x.call(d),i=new p;!(o=f.next()).done;h++)u(i,h,m?a(f,b,[o.value,h],!0):o.value);return i.length=h,i}})},"54a1":function(t,e,i){i("6c1c"),i("1654"),t.exports=i("95d5")},"5a58":function(t,e,i){var n=i("6ff1");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("782ca05d",n,!0,{sourceMap:!1,shadowMode:!1})},6779:function(t,e,i){"use strict";i.r(e);var n=i("1508"),o=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=o.a},"6cd6":function(t,e,i){"use strict";var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("8e6e"),i("ac6a"),i("456d"),i("20d6");var o=n(i("bd86"));i("c5f6");var r=n(i("7e22")),a=(n(i("e43a")),i("2f62"));function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){(0,o.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u={props:{item:Object,index:{type:Number,default:-1},isdetail:{type:Boolean,default:!1}},computed:c({},(0,a.mapState)({user:function(t){return t.user},loginStatus:function(t){return t.loginStatus}})),filters:{formatTime:function(t){return r.default.gettime.gettime(t)}},data:function(){return{readNum:0}},mounted:function(){},methods:{openSpace:function(t){uni.navigateTo({url:"/pages/user-space/user-space?user_id="+t})},follow:function(){var t=this;this.checkAuth((function(){console.log(t.item),t.request.userfollow({follow_id:t.item.user_id},{token:!0}).then((function(e){uni.$emit("updateFollowOrSupport",{type:"follow",data:{user_id:t.item.user_id}})}))}))},openDetail:function(){var t=this;if(console.log("进入详情页"),!this.isdetail){uni.navigateTo({url:"/pages/article-detail/article-detail?detail="+JSON.stringify(this.item)});var e=uni.getStorageSync("history");e=e?JSON.parse(e):[];var i=e.findIndex((function(e){return e.id==t.item.id}));-1==i&&(e.unshift(this.item),uni.setStorageSync("history",JSON.stringify(e)))}},doSupport:function(t){var e=this;this.checkAuth((function(){var i={post_id:e.item.id,type:"support"===t?0:1};e.request.userSupport(i,{token:!0}).then((function(i){if(console.log(e.item),i.errorCode)return uni.showToast({title:i.msg,icon:"none"});uni.$emit("updateFollowOrSupport",{type:"support",data:{type:t,id:e.item.id}})}))}))},openCommentPage:function(){},deletePost:function(t){var e=this;t&&uni.showModal({title:"提示",content:"你确定要删除此帖子吗？",success:function(i){i.confirm&&e.request.deletePost({id:t}).then((function(e){"删除成功"==e.msg&&(uni.showToast({title:"删除成功",icon:"none"}),uni.$emit("updatedeletePost",{type:"follow",data:{id:t}}))}))}})},doComment:function(){var t=this;this.checkAuth((function(){if(!t.isdetail)return t.openDetail();t.$emit("doComment")}))},doShare:function(){var t=this;this.checkAuth((function(){if(!t.isdetail)return t.openDetail();t.$emit("doShare")}))}}};e.default=u},"6ff1":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".filter[data-v-56b6a53c]{-webkit-filter:blur(10px);filter:blur(10px)\n\t/*模糊状态*/}",""]),t.exports=e},"75fc":function(t,e,i){"use strict";i.r(e);var n=i("a745"),o=i.n(n);function r(t){if(o()(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}var a=i("774e"),s=i.n(a),c=i("c8bb"),u=i.n(c);function l(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return s()(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return r(t)||l(t)||f()}i.d(e,"default",(function(){return d}))},"774e":function(t,e,i){t.exports=i("d2d5")},"77f7":function(t,e,i){"use strict";i.r(e);var n=i("0542"),o=i("a368");for(var r in o)"default"!==r&&function(t){i.d(e,t,(function(){return o[t]}))}(r);i("bcc7");var a,s=i("f0c5"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"7f5b8bf1",null,!1,n["a"],a);e["default"]=c.exports},"7cd6":function(t,e,i){var n=i("40c3"),o=i("5168")("iterator"),r=i("481b");t.exports=i("584a").getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||r[n(t)]}},8573:function(t,e,i){"use strict";var n,o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("topicInfo",{attrs:{topicDetil:t.topicDetil}}),i("divider"),t._l(t.hotList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"pd-1 flex justify-start border-bottom"},[i("v-uni-text",{staticClass:"iconfont  font-color",staticStyle:{"font-size":"50rpx"}},[t._v("")]),i("v-uni-text",{staticClass:"font-md text-black text-ellipsis"},[t._v(t._s(e.title))])],1)})),i("divider"),i("v-uni-view",{staticClass:"flex py-20"},t._l(t.tabList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"flex-1 flex font-md",class:t.tabIndex==n?"font-color font-lg font-weight-bold":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTab(n)}}},[t._v(t._s(e.type))])})),1),t._l(t.listData,(function(t,e){return[i("common-list",{key:e+"_0",attrs:{item:t,index:e}}),i("divider")]})),i("load-more",{attrs:{loadmore:t.loadText}})],2)},r=[];i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}))},"95d5":function(t,e,i){var n=i("40c3"),o=i("5168")("iterator"),r=i("481b");t.exports=i("584a").isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||r.hasOwnProperty(n(e))}},a368:function(t,e,i){"use strict";i.r(e);var n=i("6cd6"),o=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=o.a},a745:function(t,e,i){t.exports=i("f410")},b0dc:function(t,e,i){var n=i("e4ae");t.exports=function(t,e,i,o){try{return o?e(n(i)[0],i[1]):e(i)}catch(a){var r=t["return"];throw void 0!==r&&n(r.call(t)),a}}},b494:function(t,e,i){"use strict";i.r(e);var n=i("8573"),o=i("6779");for(var r in o)"default"!==r&&function(t){i.d(e,t,(function(){return o[t]}))}(r);i("3055");var a,s=i("f0c5"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"56b6a53c",null,!1,n["a"],a);e["default"]=c.exports},bcc7:function(t,e,i){"use strict";var n=i("0bcd"),o=i.n(n);o.a},c8bb:function(t,e,i){t.exports=i("54a1")},d2d5:function(t,e,i){i("1654"),i("549b"),t.exports=i("584a").Array.from},f410:function(t,e,i){i("1af6"),t.exports=i("584a").Array.isArray},f941:function(t,e,i){"use strict";i.r(e);var n=i("4a66"),o=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=o.a}}]);