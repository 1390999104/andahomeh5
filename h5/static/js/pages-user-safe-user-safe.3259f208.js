(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-safe-user-safe"],{"1af6":function(t,e,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},"20fd":function(t,e,n){"use strict";var r=n("d9f6"),i=n("aebd");t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},3702:function(t,e,n){var r=n("481b"),i=n("5168")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},3921:function(t,e,n){"use strict";var r=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("8e6e"),n("ac6a"),n("456d");var i=r(n("75fc")),o=r(n("bd86")),a=r(n("3348")),u=n("2f62");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,o.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={components:{uniListItem:a.default},data:function(){return{list:[],show:!1}},onLoad:function(){console.log(this.user),this.init()},onShow:function(){var t=this;uni.$on("updateUserSafe",(function(e){t.init()}))},onUnload:function(){uni.$off("updateUserSafe",(function(){}))},computed:s({},(0,u.mapState)({user:function(t){return t.user}})),methods:{init:function(){var t=this,e=[{name:"手机号",data:this.user.phone?this.user.phone:"未绑定",type:"navigateTo",url:"/pages/user-bindphone/user-bindphone"},{name:"登录密码",data:this.user.password?"修改密码":"未设置",type:"navigateTo",url:"/pages/change-password/change-password"},{name:"邮箱绑定",data:this.user.email?this.user.email:"未绑定",type:"navigateTo",url:"/pages/user-email/user-email"}];this.list=[].concat(e),this.request.getuserbind({},{token:!0}).then((function(e){console.log(e),t.$store.commit("editUserInfo",{key:"user_bind",value:e.data});var n=[{name:"微信账号",data:t.user.user_bind.weixin?t.user.user_bind.weixin.nickname:"未绑定",type:"bind",provider:"weixin"},{name:"微博账号",data:t.user.user_bind.sinaweibo?t.user.user_bind.sinaweibo.nickname:"未绑定",type:"bind",provider:"sinaweibo"},{name:"QQ账号",data:t.user.user_bind.qq?t.user.user_bind.qq.nickname:"未绑定",type:"bind",provider:"qq"}];t.list=[].concat((0,i.default)(t.list),n),console.log(t.user)}))},userBind:function(t){if(""!==t.type)switch(t.type){case"navigateTo":uni.navigateTo({url:t.url});break;case"bind":if("未绑定"!==t.data)return uni.showToast({title:"你已经绑定过了",icon:"none"});this.bind(t.provider);break}},bind:function(t){var e=this;uni.login({provider:t,success:function(n){uni.getUserInfo({provider:t,success:function(n){var r={provider:t,openid:n.userInfo.openid||n.userInfo.openId||n.userInfo.idstr,nickName:n.userInfo.nickName,avatarUrl:n.userInfo.avatarUrl};e.request.bindother(r,{token:!0}).then((function(t){if(console.log(t),t.data.errorCode)return uni.showToast({title:t.data.msg,icon:"none"});e.init(),uni.showToast({title:"绑定成功",icon:"none"})}))}})}})}}};e.default=f},"40c3":function(t,e,n){var r=n("6b4c"),i=n("5168")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},"4ee1":function(t,e,n){var r=n("5168")("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(a){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],u=o[r]();u.next=function(){return{done:n=!0}},o[r]=function(){return u},t(o)}catch(a){}return n}},"549b":function(t,e,n){"use strict";var r=n("d864"),i=n("63b6"),o=n("241e"),a=n("b0dc"),u=n("3702"),c=n("b447"),s=n("20fd"),f=n("7cd6");i(i.S+i.F*!n("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,d,l=o(t),p="function"==typeof this?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,h=void 0!==b,y=0,g=f(l);if(h&&(b=r(b,v>2?arguments[2]:void 0,2)),void 0==g||p==Array&&u(g))for(e=c(l.length),n=new p(e);e>y;y++)s(n,y,h?b(l[y],y):l[y]);else for(d=g.call(l),n=new p;!(i=d.next()).done;y++)s(n,y,h?a(d,b,[i.value,y],!0):i.value);return n.length=y,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},"75fc":function(t,e,n){"use strict";n.r(e);var r=n("a745"),i=n.n(r);function o(t){if(i()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var a=n("774e"),u=n.n(a),c=n("c8bb"),s=n.n(c);function f(t){if(s()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return u()(t)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(t){return o(t)||f(t)||d()}n.d(e,"default",(function(){return l}))},"774e":function(t,e,n){t.exports=n("d2d5")},"7cd6":function(t,e,n){var r=n("40c3"),i=n("5168")("iterator"),o=n("481b");t.exports=n("584a").getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},"95d5":function(t,e,n){var r=n("40c3"),i=n("5168")("iterator"),o=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(r(e))}},a745:function(t,e,n){t.exports=n("f410")},aade:function(t,e,n){"use strict";n.r(e);var r=n("3921"),i=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e["default"]=i.a},b0dc:function(t,e,n){var r=n("e4ae");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(a){var o=t["return"];throw void 0!==o&&r(o.call(t)),a}}},b7f4:function(t,e,n){"use strict";n.r(e);var r=n("dc94"),i=n("aade");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var a,u=n("f0c5"),c=Object(u["a"])(i["default"],r["b"],r["c"],!1,null,"03727a58",null,!1,r["a"],a);e["default"]=c.exports},c8bb:function(t,e,n){t.exports=n("54a1")},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},dc94:function(t,e,n){"use strict";var r,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",t._l(t.list,(function(e,r){return n("uni-list-item",{key:r,attrs:{title:e.name},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.userBind(e)}}},[n("v-uni-view",{staticClass:"flex text-right text-light-muted",attrs:{slot:"right"},slot:"right"},[t._v(t._s(e.data))])],1)})),1)},o=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r}))},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray}}]);